$(function(){function e(e){c.couponId=GetRequest().couponid,$.ajax({type:"get",url:"http://139.199.157.195:9090/api/getcouponproduct?couponid="+c.couponId,async:!0,success:function(t){c.result=t.result,c.numPage=Math.ceil(t.result.length/8);for(var n={result:[]},l=0;l<c.numPage;l++)n.result[l]=l+1;var o=template("pageTpl",n);$(".xx").html(o),a(e)}})}function t(){$("#banner ul").on("click",">li>a",function(e){e.preventDefault();var t=new Image;t.src=$(this).attr("href"),$("#mask>div").children().eq(0).append(t).parent().parent().addClass("visible").show()})}function n(){$(".back").on("click",function(){$(this).children().attr("href",document.referrer)})}function a(e){var t={};t.result=c.result.slice(8*(e-1),9*e),template.helper("getSrc",r);var n=template("bannerTpl",t),a=template("maskTpl",t);$("#mask>div").html(a),$("#banner ul").html(n),$("body,html").animate({scrollTop:0},400)}function l(){$("#closFix").on("mousedown",function(){$(".fix").fadeOut("slow"),$("#footer").animate({paddingBottom:0},400)})}var c={result:[],page:1,couponId:0,numPage:0};e(1),t();var o=GetRequest().title+"优惠券";$("h1").html(o);var r=function(e){var t=/<img [^>]*src=['"]([^'"]+)[^>]*>/gi;return t.exec(e)[1]};$("#mask").on("click",function(){$(this).hide()}),$("#next").on("click",function(e){e.preventDefault(),c.page>=c.numPage||(c.page++,$("select").val(c.page),a(c.page))}),$("#prev").on("click",function(e){e.preventDefault(),c.page<=1||(c.page--,$("select").val(c.page),a(c.page))}),$(".xx").on("change",function(){c.page=$(this).val(),$(this).val(c.page),a(c.page)}),n(),l()});