$(function(){function o(){i(),a()}function i(){$("#coudan-box > .list > .fliter > ul > li:nth-child(1)").click(function(){$("#coudan-box  > .hideBox > .popsort").slideToggle().siblings().css("display","none"),$ar1?($arrow1.removeClass("glyphicon-triangle-bottom"),$arrow1.addClass("glyphicon-triangle-top"),$ar1=!1):($arrow1.removeClass("glyphicon-triangle-top"),$arrow1.addClass("glyphicon-triangle-bottom"),$ar1=!0)}),$("#coudan-box > .list > .fliter > ul > li:nth-child(2)").click(function(){$("#coudan-box > .hideBox > .popprice").slideToggle().siblings().css("display","none"),$ar2?($arrow2.removeClass("glyphicon-triangle-bottom"),$arrow2.addClass("glyphicon-triangle-top"),$ar2=!1):($arrow2.removeClass("glyphicon-triangle-top"),$arrow2.addClass("glyphicon-triangle-bottom"),$ar2=!0)}),$("#coudan-box > .list > .fliter > ul > li:nth-child(3)").click(function(){$("#coudan-box > .hideBox > .popcat").slideToggle().siblings().css("display","none"),$ar3?($arrow3.removeClass("glyphicon-triangle-bottom"),$arrow3.addClass("glyphicon-triangle-top"),$ar3=!1):($arrow3.removeClass("glyphicon-triangle-top"),$arrow3.addClass("glyphicon-triangle-bottom"),$ar3=!0)}),$ar4=!0,$bgbtn=$("#coudan-box > .list > .menu_btn > i"),$("#coudan-box > .list > .menu_btn").click(function(){$("#coudan-box > .hideBox > .hamberMenu").slideToggle().siblings().css("display","none"),$ar4?($bgbtn.removeClass("glyphicon-menu-hamburger"),$bgbtn.addClass("glyphicon-remove"),$ar4=!1):($bgbtn.removeClass("glyphicon-remove"),$bgbtn.addClass("glyphicon-menu-hamburger"),$ar4=!0)})}function l(){function o(o){$.ajax({url:"http://139.199.157.195:9090/api/getgsproduct",data:o,success:function(o){n=o,t(!0)}})}$("#coudan-box  .popsort > ul > li").click(function(){$that=$("#coudan-box .popsort li").index(this),$odd=$("#coudan-box .popsort > ul > li > i").eq($that).parent().siblings().children(),$("#coudan-box .popsort > ul > li > i").eq($that).addClass("glyphicon glyphicon-ok"),$odd.removeClass("glyphicon glyphicon-ok"),$("#coudan-box > .list > .fliter > ul > li:nth-child(1) > span").html(this.firstChild.textContent),$postdata1={shopid:$that,areaid:"0"},o($postdata1),$("#coudan-box  > .hideBox > .popsort").slideToggle(),$arrow1.removeClass("glyphicon glyphicon-triangle-top"),$arrow1.addClass("glyphicon glyphicon-triangle-bottom"),$ar1=!0}),$("#coudan-box  .popprice > ul > li").click(function(){$that=$("#coudan-box .popprice li").index(this),$odd=$("#coudan-box .popprice > ul > li > i").eq($that).parent().siblings().children(),$("#coudan-box .popprice > ul > li > i").eq($that).addClass("glyphicon glyphicon-ok"),$odd.removeClass("glyphicon glyphicon-ok"),$("#coudan-box > .list > .fliter > ul > li:nth-child(2) > span").html(this.firstChild.textContent.substr(0,2)),$postdata2={shopid:"0",areaid:$that},o($postdata2),$("#coudan-box > .hideBox > .popprice").slideToggle(),$arrow2.removeClass("glyphicon-triangle-top"),$arrow2.addClass("glyphicon-triangle-bottom"),$ar2=!0}),$("#coudan-box  .popcat > ul > li").click(function(){$that=$("#coudan-box .popcat li").index(this),$("#coudan-box .popcat > ul > li > i").eq($that).addClass("glyphicon glyphicon-ok").parent().siblings().children().removeClass("glyphicon glyphicon-ok"),$("#coudan-box > .list > .fliter > ul > li:nth-child(3) > span").html(this.firstChild.textContent),$("#coudan-box > .hideBox > .popcat").slideToggle(),$arrow3.removeClass("glyphicon-triangle-top"),$arrow3.addClass("glyphicon-triangle-bottom"),$ar3=!0})}function t(o){var i={result:[]},l=8;n.result.length<=8&&(l=n.result.length);for(var t=0;t<l;t++)i.result.push(n.result.shift());var a=template("itemTpl",i);o?$("#coudan-box > .item > ul").html(a):$("#coudan-box > .item > ul").append(a)}function a(){function o(){$.ajax({url:"http://139.199.157.195:9090/api/getgsshop",success:function(o){var i=template("shopTpl",o);$("#coudan-box > .hideBox > .popsort > ul").html(i)}})}function i(){$.ajax({url:"http://139.199.157.195:9090/api/getgsshoparea",success:function(o){var i=template("areaTpl",o);$("#coudan-box > .hideBox > .popprice > ul").html(i),l()}})}function a(){$.ajax({url:"http://139.199.157.195:9090/api/getgsproduct",data:$postdata,success:function(o){n=o,t()}})}$postdata={shopid:"0",areaid:"0"},o(),i(),a()}o(),$ar1=!0,$arrow1=$("#coudan-box > .list > .fliter > ul > li:nth-child(1) > i"),$ar2=!0,$arrow2=$("#coudan-box > .list > .fliter > ul > li:nth-child(2) > i"),$ar3=!0,$arrow3=$("#coudan-box > .list > .fliter > ul > li:nth-child(3) > i");var n={};window.onscroll=function(){if(0!=n.result.length){var o=$("#coudan-box > .item > ul").height()+$("#coudan-box > .list").height()+$(".head").height()-$(document.body).height(),i=o-$(document.body).scrollTop();i<50&&t()}}});